<div *ngIf="currentTopic" class="learning-page-container">
  <!-- Full Screen Layout -->
  <div class="full-screen-layout">
    <!-- Left Sidebar - Full Height -->
    <div class="sidebar-section">
      <app-sidebar
        [isCollapsed]="isSidebarCollapsed"
        (collapseToggle)="toggleSidebar()"
      >
      </app-sidebar>
    </div>

    <!-- Right Section -->
    <div class="right-section">
      <!-- Top Navbar -->
      <div class="navbar-section">
        <app-navbar
          [sectionName]="progress.section"
          [currentTopic]="progress.current"
          [totalTopics]="progress.total"
          (sidebarToggle)="toggleSidebar()"
        >
        </app-navbar>
      </div>

      <!-- Main Content Area -->
      <div class="content-section" #contentSection>
        <!-- Topic Header -->
        <div class="topic-header">
          <h1 class="topic-title">{{ currentTopic.name }}</h1>
          <div class="topic-meta">
            <span class="section-badge">{{ progress.section }}</span>
            <span class="progress-text"
              >{{ progress.current }} of {{ progress.total }}</span
            >
          </div>
        </div>

        <div class="topic-content">
          <!-- Explanation Section -->
          <div class="content-section explanation-section">
            <div class="section-header">
              <i class="pi pi-book section-icon"></i>
              <h3 class="section-title">Explanation</h3>
            </div>
            <div class="prose dark:prose-invert max-w-none">
              <div
                [innerHTML]="currentTopic.explanation"
                class="text-content"
              ></div>
            </div>
          </div>

          <!-- Code Example Section -->
          <div class="content-section code-section">
            <div class="section-header">
              <i class="pi pi-code section-icon"></i>
              <h3 class="section-title">Code Example</h3>
              <button
                pButton
                icon="pi pi-copy"
                label="Copy"
                class="p-button-sm p-button-text"
                (click)="copyCode()"
              ></button>
            </div>
            <div class="code-block">
              <pre
                class="code-content"
              ><code>{{ currentTopic.codeExample }}</code></pre>
            </div>
          </div>

          <!-- Key Points Section -->
          <div class="content-section keypoints-section">
            <div class="section-header">
              <i class="pi pi-check-circle section-icon"></i>
              <h3 class="section-title">Key Points</h3>
            </div>
            <ul class="keypoints-list">
              <li
                *ngFor="let point of currentTopic.keyPoints"
                class="keypoint-item"
              >
                <i class="pi pi-angle-right keypoint-icon"></i>
                <span>{{ point }}</span>
              </li>
            </ul>
          </div>

          <!-- Exercise Section -->
          <div
            *ngIf="currentTopic.exercise"
            class="content-section exercise-section"
          >
            <div class="section-header">
              <i class="pi pi-pencil section-icon"></i>
              <h3 class="section-title">Practice Exercise</h3>
            </div>
            <div class="exercise-content">
              <p>{{ currentTopic.exercise }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Fixed Navigation Buttons -->
      <div class="navigation-fixed">
        <div class="navigation-buttons">
          <button
            pButton
            label="Previous"
            icon="pi pi-arrow-left"
            [disabled]="!hasPrevious"
            (click)="loadPreviousTopic()"
          ></button>
          <button
            pButton
            label="Next"
            icon="pi pi-arrow-right"
            iconPos="right"
            [disabled]="!hasNext"
            (click)="loadNextTopic()"
          ></button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div
  *ngIf="!currentTopic"
  class="min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900"
>
  <p-progressSpinner></p-progressSpinner>
</div>
